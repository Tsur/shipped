var _1 = {
    "title": "Level 1",
    "difficulty": "easy",
    "time": 45,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lblue2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "dgreen3h",
            "row": 5,
            "col": 2
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 0
        },
        {
            "box": "lorange2v",
            "row": 4,
            "col": 0
        },
        {
            "box": "dblue3v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 5
        }
    ]
};

var _2 = {
    "title": "Level 2",
    "difficulty": "easy",
    "time": 45,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 0
        },
        {
            "box": "dgreen2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 2,
            "col": 4
        },
        {
            "box": "lpink2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "dblack2h",
            "row": 5,
            "col": 3
        },
        {
            "box": "dpurple2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 5
        }
    ]
};

var _3 = {
    "title": "Level 3",
    "difficulty": "easy",
    "time": 45,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 3,
            "col": 1
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lblue2h",
            "row": 5,
            "col": 2
        },
        {
            "box": "lpurple3v",
            "row": 3,
            "col": 5
        },
        {
            "box": "lorange2v",
            "row": 4,
            "col": 1
        },
        {
            "box": "lyellow3v",
            "row": 2,
            "col": 3
        }
    ]
};

var _4 = {
    "title": "Level 4",
    "difficulty": "easy",
    "time": 45,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpurple3v",
            "row": 0,
            "col": 3
        },
        {
            "box": "lgreen2v",
            "row": 3,
            "col": 2
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 4,
            "col": 5
        },
        {
            "box": "dgreen3h",
            "row": 5,
            "col": 2
        }
    ]
};

var _5 = {
    "title": "Level 5",
    "difficulty": "easy",
    "time": 45,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 4,
            "col": 0
        },
        {
            "box": "dgreen3h",
            "row": 3,
            "col": 1
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 5
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 3
        },
        {
            "box": "dblue3v",
            "row": 1,
            "col": 4
        },
        {
            "box": "dblack2v",
            "row": 2,
            "col": 5
        },
        {
            "box": "dpurple2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "dgreen2h",
            "row": 5,
            "col": 4
        }
    ]
};

var _6 = {
    "title": "Level 6",
    "difficulty": "easy",
    "time": 65,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 0
        },
        {
            "box": "lpink2h",
            "row": 3,
            "col": 0
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "dpurple2v",
            "row": 3,
            "col": 2
        },
        {
            "box": "lyellow3v",
            "row": 1,
            "col": 4
        },
        {
            "box": "dblue3v",
            "row": 2,
            "col": 3
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "dgreen3h",
            "row": 5,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 3
        }
    ]
};

var _7 = {
    "title": "Level 7",
    "difficulty": "easy",
    "time": 65,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 1
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 2
        },
        {
            "box": "lyellow2h",
            "row": 3,
            "col": 2
        },
        {
            "box": "dpurple2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lbrown2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 0,
            "col": 4
        },
        {
            "box": "lpink2v",
            "row": 0,
            "col": 5
        },
        {
            "box": "dgreen2v",
            "row": 2,
            "col": 5
        }
    ]
};

var _8 = {
    "title": "Level 8",
    "difficulty": "easy",
    "time": 65,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "dgreen2h",
            "row": 3,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lbrown2h",
            "row": 4,
            "col": 0
        },
        {
            "box": "dbrown2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "lorange2h",
            "row": 1,
            "col": 2
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 2
        },
        {
            "box": "lyellow2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 3
        },
        {
            "box": "dpurple2v",
            "row": 2,
            "col": 3
        },
        {
            "box": "lpurple3h",
            "row": 4,
            "col": 3
        },
        {
            "box": "dblue3h",
            "row": 5,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 1,
            "col": 4
        },
        {
            "box": "dblack2h",
            "row": 3,
            "col": 4
        },
        {
            "box": "dyellow3v",
            "row": 0,
            "col": 5
        }
    ]
};

var _9 = {
    "title": "Level 9",
    "difficulty": "easy",
    "time": 65,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 1
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lbrown2v",
            "row": 4,
            "col": 5
        },
        {
            "box": "lpurple3v",
            "row": 3,
            "col": 0
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 2
        },
        {
            "box": "lpink2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lyellow3v",
            "row": 2,
            "col": 4
        },
        {
            "box": "dgreen2v",
            "row": 2,
            "col": 5
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 1
        },
        {
            "box": "lblue2h",
            "row": 0,
            "col": 4
        },
        {
            "box": "dpurple2h",
            "row": 1,
            "col": 4
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 2
        }
    ]
};

var _10 = {
    "title": "Level 10",
    "difficulty": "easy",
    "time": 65,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2h",
            "row": 1,
            "col": 0
        },
        {
            "box": "lpurple3v",
            "row": 2,
            "col": 0
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 4
        },
        {
            "box": "dpurple2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 1
        },
        {
            "box": "lblue2h",
            "row": 0,
            "col": 4
        },
        {
            "box": "dyellow3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "dblack2h",
            "row": 5,
            "col": 0
        }
    ]
};

var _11 = {
    "title": "Level 11",
    "difficulty": "normal",
    "time": 85,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 1
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpurple3v",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 3,
            "col": 2
        },
        {
            "box": "dgreen3h",
            "row": 5,
            "col": 2
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dpurple2v",
            "row": 4,
            "col": 5
        }
    ]
};

var _12 = {
    "title": "Level 12",
    "difficulty": "normal",
    "time": 85,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 5
        },
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 2
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 1
        },
        {
            "box": "dgreen3h",
            "row": 5,
            "col": 0
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 4,
            "col": 4
        }
    ]
};

var _13 = {
    "title": "Level 13",
    "difficulty": "normal",
    "time": 85,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lyellow3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lpurple3v",
            "row": 3,
            "col": 0
        },
        {
            "box": "dpurple2v",
            "row": 2,
            "col": 1
        },
        {
            "box": "lyellow2h",
            "row": 5,
            "col": 1
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 2
        },
        {
            "box": "lpink2v",
            "row": 1,
            "col": 2
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 3
        },
        {
            "box": "dgreen2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 0,
            "col": 4
        },
        {
            "box": "lbrown2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "dgreen2h",
            "row": 5,
            "col": 4
        }
    ]
};

var _14 = {
    "title": "Level 14",
    "difficulty": "normal",
    "time": 85,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lorange2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lpurple2v",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 0
        },
        {
            "box": "dgreen2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 2
        },
        {
            "box": "lbrown2h",
            "row": 3,
            "col": 2
        },
        {
            "box": "lyellow2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 4
        },
        {
            "box": "dgreen2v",
            "row": 2,
            "col": 4
        },
        {
            "box": "dpurple2v",
            "row": 2,
            "col": 5
        },
        {
            "box": "dbrown2h",
            "row": 4,
            "col": 4
        }
    ]
};

var _15 = {
    "title": "Level 15",
    "difficulty": "normal",
    "time": 85,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lyellow3v",
            "row": 1,
            "col": 4
        },
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 1
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 0
        },
        {
            "box": "dblue3v",
            "row": 2,
            "col": 0
        },
        {
            "box": "lgreen3v",
            "row": 2,
            "col": 1
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 1
        },
        {
            "box": "lpink2h",
            "row": 1,
            "col": 2
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 2
        },
        {
            "box": "dpurple2v",
            "row": 3,
            "col": 2
        },
        {
            "box": "dgreen2v",
            "row": 3,
            "col": 3
        },
        {
            "box": "lyellow2h",
            "row": 5,
            "col": 3
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 3
        },
        {
            "box": "dblack2h",
            "row": 4,
            "col": 4
        }
    ]
};

var _16 = {
    "title": "Level 16",
    "difficulty": "normal",
    "time": 85,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 2
        },
        {
            "box": "lblue2v",
            "row": 0,
            "col": 4
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 5
        },
        {
            "box": "lpink2v",
            "row": 1,
            "col": 0
        },
        {
            "box": "dpurple2h",
            "row": 1,
            "col": 2
        },
        {
            "box": "dgreen2v",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpurple3v",
            "row": 2,
            "col": 2
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 3
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dblack2h",
            "row": 5,
            "col": 0
        }
    ]
};

var _17 = {
    "title": "Level 17",
    "difficulty": "normal",
    "time": 115,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 1
        },
        {
            "box": "lorange2h",
            "row": 1,
            "col": 2
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 4
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 2
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 0
        },
        {
            "box": "lpurple3v",
            "row": 3,
            "col": 3
        },
        {
            "box": "dblue3h",
            "row": 4,
            "col": 0
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 4
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 5
        },
        {
            "box": "lgreen3h",
            "row": 5,
            "col": 0
        }
    ]
};

var _18 = {
    "title": "Level 18",
    "difficulty": "normal",
    "time": 115,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2h",
            "row": 4,
            "col": 1
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 1
        },
        {
            "box": "lpurple3v",
            "row": 2,
            "col": 0
        },
        {
            "box": "lgreen3h",
            "row": 5,
            "col": 0
        }
    ]
};

var _19 = {
    "title": "Level 19",
    "difficulty": "normal",
    "time": 115,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 3
        },
        {
            "box": "dbrown2v",
            "row": 1,
            "col": 4
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 1
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 2
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 2
        },
        {
            "box": "dgreen2v",
            "row": 3,
            "col": 4
        },
        {
            "box": "lyellow3h",
            "row": 4,
            "col": 1
        }
    ]
};

var _20 = {
    "title": "Level 20",
    "difficulty": "normal",
    "time": 115,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2h",
            "row": 1,
            "col": 1
        },
        {
            "box": "lblue2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 2
        },
        {
            "box": "lpurple3v",
            "row": 2,
            "col": 5
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 3
        },
        {
            "box": "dblue3h",
            "row": 5,
            "col": 3
        },
        {
            "box": "dpurple2v",
            "row": 4,
            "col": 2
        }
    ]
};

var _21 = {
    "title": "Level 21",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 1
        },
        {
            "box": "lgreen3h",
            "row": 5,
            "col": 3
        }
    ]
};

var _22 = {
    "title": "Level 22",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 0
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2v",
            "row": 3,
            "col": 1
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 4
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 0
        },
        {
            "box": "dblack2h",
            "row": 4,
            "col": 2
        },
        {
            "box": "lbrown2v",
            "row": 4,
            "col": 5
        },
        {
            "box": "dblue3h",
            "row": 5,
            "col": 1
        }
    ]
};

var _23 = {
    "title": "Level 23",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 1,
            "col": 2
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 2
        },
        {
            "box": "lorange2h",
            "row": 1,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 3,
            "col": 2
        },
        {
            "box": "lpurple3v",
            "row": 0,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 3
        },
        {
            "box": "lpink2v",
            "row": 3,
            "col": 3
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 4
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "dblue3h",
            "row": 5,
            "col": 2
        }
    ]
};

var _24 = {
    "title": "Level 24",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lyellow3h",
            "row": 4,
            "col": 0
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 1,
            "col": 1
        },
        {
            "box": "lpurple2v",
            "row": 2,
            "col": 4
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 2
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 0
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 4
        },
        {
            "box": "dgreen2h",
            "row": 3,
            "col": 1
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 0
        }
    ]
};

var _25 = {
    "title": "Level 25",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lblue2h",
            "row": 0,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 2,
            "col": 0
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 1
        },
        {
            "box": "dpurple2v",
            "row": 2,
            "col": 4
        },
        {
            "box": "lpink2h",
            "row": 1,
            "col": 0
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 1
        },
        {
            "box": "lbrown2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "dyellow2h",
            "row": 5,
            "col": 4
        }
    ]
};

var _26 = {
    "title": "Level 26",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 1
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 0
        },
        {
            "box": "lblue2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 4
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 5
        },
        {
            "box": "dpurple2v",
            "row": 3,
            "col": 0
        },
        {
            "box": "lgreen3h",
            "row": 3,
            "col": 1
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 5
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 3
        }
    ]
};

var _27 = {
    "title": "Level 27",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 1
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 1
        },
        {
            "box": "lpurple3v",
            "row": 2,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 2
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "dblue3h",
            "row": 5,
            "col": 3
        }
    ]
};

var _28 = {
    "title": "Level 28",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 3
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lorange2h",
            "row": 1,
            "col": 4
        },
        {
            "box": "lblue2v",
            "row": 3,
            "col": 0
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 2
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 3,
            "col": 1
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dgreen2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "dblack2h",
            "row": 5,
            "col": 2
        },
        {
            "box": "dgreen3h",
            "row": 4,
            "col": 2
        },
        {
            "box": "dblue3v",
            "row": 3,
            "col": 5
        }
    ]
};

var _29 = {
    "title": "Level 29",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 1,
            "col": 2
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lorange2v",
            "row": 2,
            "col": 5
        },
        {
            "box": "lblue2v",
            "row": 3,
            "col": 0
        },
        {
            "box": "lpurple3v",
            "row": 0,
            "col": 4
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2h",
            "row": 3,
            "col": 1
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 1
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "lgreen3h",
            "row": 5,
            "col": 0
        },
        {
            "box": "lbrown2v",
            "row": 4,
            "col": 5
        }
    ]
};

var _30 = {
    "title": "Level 30",
    "difficulty": "advanced",
    "time": 145,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lblue2h",
            "row": 3,
            "col": 0
        },
        {
            "box": "lpurple3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2h",
            "row": 3,
            "col": 2
        },
        {
            "box": "dpurple2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "dgreen2h",
            "row": 5,
            "col": 2
        },
        {
            "box": "dblue3v",
            "row": 3,
            "col": 5
        }
    ]
};

var _31 = {
    "title": "Level 31",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 2,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 0
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 0
        },
        {
            "box": "dblue3v",
            "row": 3,
            "col": 2
        },
        {
            "box": "dgreen3h",
            "row": 5,
            "col": 3
        }
    ]
};

var _32 = {
    "title": "Level 32",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 3
        },
        {
            "box": "lblue2h",
            "row": 0,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 3,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 3,
            "col": 0
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 1
        },
        {
            "box": "dgreen2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dbrown2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 0
        }
    ]
};

var _33 = {
    "title": "Level 33",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 1
        },
        {
            "box": "dgreen3v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lorange2h",
            "row": 0,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 3,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2h",
            "row": 3,
            "col": 1
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 1
        },
        {
            "box": "lbrown2v",
            "row": 4,
            "col": 4
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "dyellow2v",
            "row": 3,
            "col": 0
        },
        {
            "box": "dblue3h",
            "row": 5,
            "col": 0
        }
    ]
};

var _34 = {
    "title": "Level 34",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 0
        },
        {
            "box": "dgreen3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 2,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 3,
            "col": 3
        },
        {
            "box": "dpurple2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 3
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 0
        },
        {
            "box": "dyellow2h",
            "row": 5,
            "col": 0
        }
    ]
};

var _35 = {
    "title": "Level 35",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 3
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 4
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "dyellow3v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lpurple3v",
            "row": 0,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2h",
            "row": 4,
            "col": 1
        },
        {
            "box": "dpurple2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "dbrown2v",
            "row": 3,
            "col": 0
        },
        {
            "box": "dblack2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 1
        }
    ]
};

var _36 = {
    "title": "Level 36",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 4
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 1
        },
        {
            "box": "dyellow3v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lpurple3h",
            "row": 0,
            "col": 1
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 2
        },
        {
            "box": "lpink2v",
            "row": 3,
            "col": 3
        },
        {
            "box": "dpurple2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "lblue2h",
            "row": 1,
            "col": 2
        },
        {
            "box": "dblack2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "dgreen3h",
            "row": 3,
            "col": 0
        },
        {
            "box": "dblue3v",
            "row": 1,
            "col": 5
        }
    ]
};

var _37 = {
    "title": "Level 37",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 0
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "lyellow3v",
            "row": 1,
            "col": 4
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 1
        },
        {
            "box": "lpink2h",
            "row": 1,
            "col": 0
        },
        {
            "box": "dpurple2v",
            "row": 4,
            "col": 3
        },
        {
            "box": "lblue2h",
            "row": 0,
            "col": 4
        },
        {
            "box": "dblack2h",
            "row": 5,
            "col": 0
        },
        {
            "box": "dgreen2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "dblue3v",
            "row": 2,
            "col": 0
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 4
        },
        {
            "box": "dgreen3h",
            "row": 3,
            "col": 1
        }
    ]
};

var _38 = {
    "title": "Level 38",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 0
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "lorange2h",
            "row": 1,
            "col": 1
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2v",
            "row": 2,
            "col": 2
        },
        {
            "box": "lblue2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "dblack2h",
            "row": 4,
            "col": 3
        },
        {
            "box": "dgreen3v",
            "row": 2,
            "col": 5
        },
        {
            "box": "dblue3h",
            "row": 5,
            "col": 3
        }
    ]
};

var _39 = {
    "title": "Level 39",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2v",
            "row": 0,
            "col": 2
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 0
        },
        {
            "box": "lorange2v",
            "row": 1,
            "col": 3
        },
        {
            "box": "lyellow3h",
            "row": 0,
            "col": 3
        },
        {
            "box": "dpurple2h",
            "row": 3,
            "col": 3
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 0
        },
        {
            "box": "lpink2h",
            "row": 3,
            "col": 0
        },
        {
            "box": "lblue2v",
            "row": 2,
            "col": 2
        },
        {
            "box": "dblack2v",
            "row": 4,
            "col": 1
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 0
        },
        {
            "box": "dyellow2h",
            "row": 5,
            "col": 2
        },
        {
            "box": "lbrown2h",
            "row": 4,
            "col": 2
        },
        {
            "box": "dgreen3v",
            "row": 2,
            "col": 5
        }
    ]
};

var _40 = {
    "title": "Level 40",
    "difficulty": "expert",
    "time": 215,
    "rows": 6,
    "cols": 6,
    "pieces": [
        {
            "box": "lgreen2h",
            "row": 0,
            "col": 1
        },
        {
            "box": "dgreen2v",
            "row": 4,
            "col": 2
        },
        {
            "box": "lorange2v",
            "row": 0,
            "col": 4
        },
        {
            "box": "lyellow3v",
            "row": 0,
            "col": 0
        },
        {
            "box": "lpurple3v",
            "row": 1,
            "col": 5
        },
        {
            "box": "lred2h",
            "row": 2,
            "col": 3
        },
        {
            "box": "lpink2v",
            "row": 1,
            "col": 2
        },
        {
            "box": "dpurple2v",
            "row": 3,
            "col": 3
        },
        {
            "box": "lblue2v",
            "row": 1,
            "col": 1
        },
        {
            "box": "dblack2h",
            "row": 4,
            "col": 4
        },
        {
            "box": "dyellow2h",
            "row": 5,
            "col": 3
        },
        {
            "box": "dblue3h",
            "row": 3,
            "col": 0
        },
        {
            "box": "lbrown2h",
            "row": 5,
            "col": 0
        }
    ]
};



var gameLevels = Object.freeze({
	Level1: _1,
	Level2: _2,
	Level3: _3,
	Level4: _4,
	Level5: _5,
	Level6: _6,
	Level7: _7,
	Level8: _8,
	Level9: _9,
	Level10: _10,
	Level11: _11,
	Level12: _12,
	Level13: _13,
	Level14: _14,
	Level15: _15,
	Level16: _16,
	Level17: _17,
	Level18: _18,
	Level19: _19,
	Level20: _20,
	Level21: _21,
	Level22: _22,
	Level23: _23,
	Level24: _24,
	Level25: _25,
	Level26: _26,
	Level27: _27,
	Level28: _28,
	Level29: _29,
	Level30: _30,
	Level31: _31,
	Level32: _32,
	Level33: _33,
	Level34: _34,
	Level35: _35,
	Level36: _36,
	Level37: _37,
	Level38: _38,
	Level39: _39,
	Level40: _40
});

class Piece {
    constructor(row, col, box) {
        this._color = box.color;
        this._scolor = box.selected_color || box.color;
        this._row = row;
        this._col = col;
        this._size = box.size;
        this._selected = false;
        this._main = (row === 2 && box.type === 'h') || false;
    }
    getCol() {
        return this._col;
    }
    getRow() {
        return this._row;
    }
    getSize() {
        return this._size;
    }
    setSelected(selected) {
        this._selected = selected;
    }
    isMain() {
        return this._main;
    }
}

function createCanvas() {
    const canvas = document.createElement('canvas');
    return canvas;
}
function getPointFromEvent(event, canvas) {
    const rect = canvas.getBoundingClientRect();
    const size = ~~canvas.width / 6;
    const x = Math.floor((event.clientX - rect.left) / size);
    const y = Math.floor((event.clientY - rect.top) / size);
    return { x, y };
}
function paintLine(canvasCtx, x, y, x2, y2, color, lineWidth) {
    canvasCtx.beginPath();
    canvasCtx.moveTo(x, y);
    canvasCtx.lineTo(x2, y2);
    canvasCtx.strokeStyle = color ? color : canvasCtx.strokeStyle;
    canvasCtx.lineWidth = lineWidth ? lineWidth : canvasCtx.lineWidth;
    canvasCtx.stroke();
}
function paintRect(canvasCtx, x, y, width, height, size, color = '#FFF', borderColor = '#000', thickness = 1) {
    const increment = size / 6;
    const radius = 10;
    // canvasCtx.fillStyle= borderColor
    // canvasCtx.fillRect(x - (thickness), y - (thickness), width + (thickness * 2), height + (thickness * 2))
    canvasCtx.lineJoin = "round";
    canvasCtx.lineWidth = radius; //radius
    canvasCtx.strokeStyle = color;
    canvasCtx.fillStyle = color;
    canvasCtx.strokeRect(x + increment + (radius / 2), y + increment + (radius / 2), width - (increment * 2) - radius, height - (increment * 2) - radius);
    canvasCtx.fillRect(x + increment + (radius / 2), y + increment + (radius / 2), width - (increment * 2) - radius, height - (increment * 2) - radius);
    // canvasCtx.fillRect(x+increment, y+increment, width - (increment*2), height - (increment*2))
}
function range(from, to) {
    if (from > to)
        return [...Array(from - to).keys()].map(e => e + to);
    return [...Array(to - from).keys()].map(e => e + from);
}
function lpadTime(time) {
    return time < 10 ? `0${time}` : `${time}`;
}

class VerticalPiece extends Piece {
    constructor(row, col, box) {
        super(row, col, box);
        this._type = 'v';
    }
    isAt(point) {
        if (this._col != point.x)
            return false;
        return range(0, this._size).some(i => point.y === i + this._row);
    }
    paint(context) {
        const size = ~~context.canvas.width / 6;
        paintRect(context, this._col * size, this._row * size, size, this._size * size, size, this._selected ? this._scolor : this._color);
    }
    moveTo(point) {
        if (this.isAt(point))
            return;
        const rowTarget = point.y;
        if (rowTarget > this._row) {
            this._row = rowTarget + 1 - this._size;
        }
        else {
            this._row = rowTarget;
        }
    }
}

class HorizontalPiece extends Piece {
    constructor(row, col, box) {
        super(row, col, box);
        this._type = 'h';
    }
    isAt(point) {
        if (this._row != point.y)
            return false;
        return range(0, this._size).some(i => point.x === i + this._col);
    }
    paint(context) {
        const size = ~~context.canvas.width / 6;
        paintRect(context, this._col * size, this._row * size, this._size * size, size, size, this._selected ? this._scolor : this._color);
    }
    moveTo(point) {
        if (this.isAt(point))
            return;
        const colTarget = point.x;
        if (colTarget > this._col) {
            this._col = colTarget + 1 - this._size;
        }
        else {
            this._col = colTarget;
        }
    }
}

var Boxes = {
    "lred2h": {
        "type": "h",
        "color": "rgba(245, 100, 90, .3)",
        "selected_color": "rgba(245, 100, 90, .3)",
        "size": 2
    },
    "lgreen2h": {
        "type": "h",
        "color": "rgba(76, 175, 80, .3)",
        "selected_color": "rgba(76, 175, 80, .3)",
        "size": 2
    },
    "lgreen2v": {
        "type": "v",
        "color": "rgba(76, 175, 80, .3)",
        "selected_color": "rgba(76, 175, 80, .3)",
        "size": 2
    },
    "lgreen3v": {
        "type": "v",
        "color": "rgba(76, 175, 80, .3)",
        "selected_color": "rgba(76, 175, 80, .3)",
        "size": 3
    },
    "lgreen3h": {
        "type": "h",
        "color": "rgba(76, 175, 80, .3)",
        "selected_color": "rgba(76, 175, 80, .3)",
        "size": 3
    },
    "lblue2h": {
        "type": "h",
        "color": "rgba(3, 169, 244, .3)",
        "selected_color": "rgba(3, 169, 244, .3)",
        "size": 2
    },
    "lblue2v": {
        "type": "v",
        "color": "rgba(3, 169, 244, .3)",
        "selected_color": "rgba(3, 169, 244, .3)",
        "size": 2
    },
    "dgreen3h": {
        "type": "h",
        "color": "rgba(28, 101, 9, .3)",
        "selected_color": "rgba(28, 101, 9, .3)",
        "size": 3
    },
    "dgreen2h": {
        "type": "h",
        "color": "rgba(28, 101, 9, .3)",
        "selected_color": "rgba(28, 101, 9, .3)",
        "size": 2
    },
    "dgreen2v": {
        "type": "v",
        "color": "rgba(28, 101, 9, .3)",
        "selected_color": "rgba(28, 101, 9, .3)",
        "size": 2
    },
    "dgreen3v": {
        "type": "v",
        "color": "rgba(28, 101, 9, .3)",
        "selected_color": "rgba(28, 101, 9, .3)",
        "size": 3
    },
    "lpurple3v": {
        "type": "v",
        "color": "rgba(156, 39, 176, .3)",
        "selected_color": "rgba(156, 39, 176, .3)",
        "size": 3
    },
    "lpurple2h": {
        "type": "h",
        "color": "rgba(156, 39, 176, .3)",
        "selected_color": "rgba(156, 39, 176, .3)",
        "size": 2
    },
    "lpurple2v": {
        "type": "v",
        "color": "rgba(156, 39, 176, .3)",
        "selected_color": "rgba(156, 39, 176, .3)",
        "size": 2
    },
    "dpurple2h": {
        "type": "h",
        "color": "rgba(93, 0, 140, .3)",
        "selected_color": "rgba(93, 0, 140, .3)",
        "size": 2
    },
    "dpurple2v": {
        "type": "v",
        "color": "rgba(93, 0, 140, .3)",
        "selected_color": "rgba(93, 0, 140, .3)",
        "size": 2
    },
    "lpurple3h": {
        "type": "h",
        "color": "rgba(156, 39, 176, .3)",
        "selected_color": "rgba(156, 39, 176, .3)",
        "size": 3
    },
    "lorange2v": {
        "type": "v",
        "color": "rgba(255, 152, 0, .3)",
        "selected_color": "rgba(255, 152, 0, .3)",
        "size": 2
    },
    "lorange2h": {
        "type": "h",
        "color": "rgba(255, 152, 0, .3)",
        "selected_color": "rgba(255, 152, 0, .3)",
        "size": 2
    },
    "dblue3v": {
        "type": "v",
        "color": "rgba(7, 12, 148, .3)",
        "selected_color": "rgba(7, 12, 148, .3)",
        "size": 3
    },
    "dblue3h": {
        "type": "h",
        "color": "rgba(7, 12, 148, .3)",
        "selected_color": "rgba(7, 12, 148, .3)",
        "size": 3
    },
    "lyellow2v": {
        "type": "v",
        "color": "rgba(255, 235, 59, .3)",
        "selected_color": "rgba(255, 235, 59, .3)",
        "size": 2
    },
    "lyellow3h": {
        "type": "h",
        "color": "rgba(255, 235, 59, .3)",
        "selected_color": "rgba(255, 235, 59, .3)",
        "size": 3
    },
    "lyellow3v": {
        "type": "v",
        "color": "rgba(255, 235, 59, .3)",
        "selected_color": "rgba(255, 235, 59, .3)",
        "size": 3
    },
    "dyellow3v": {
        "type": "v",
        "color": "rgba(255, 235, 59, .3)",
        "selected_color": "rgba(255, 235, 59, .3)",
        "size": 3
    },
    "dyellow2h": {
        "type": "h",
        "color": "rgba(255, 235, 59, .3)",
        "selected_color": "rgba(255, 235, 59, .3)",
        "size": 2
    },
    "dyellow2v": {
        "type": "v",
        "color": "rgba(255, 235, 59, .3)",
        "selected_color": "rgba(255, 235, 59, .3)",
        "size": 2
    },
    "lyellow2h": {
        "type": "h",
        "color": "rgba(255, 235, 59, .3)",
        "selected_color": "rgba(255, 235, 59, .3)",
        "size": 2
    },
    "lpink2v": {
        "type": "v",
        "color": "rgba(243, 62, 188, .3)",
        "selected_color": "rgba(243, 62, 188, .3)",
        "size": 2
    },
    "lpink2h": {
        "type": "h",
        "color": "rgba(243, 62, 188, .3)",
        "selected_color": "rgba(243, 62, 188, .3)",
        "size": 2
    },
    "lblack2h": {
        "type": "h",
        "color": "rgba(0, 0, 0, .3)",
        "selected_color": "rgba(0, 0, 0, .3)",
        "size": 2
    },
    "dblack2h": {
        "type": "h",
        "color": "rgba(0, 0, 0, .3)",
        "selected_color": "rgba(0, 0, 0, .3)",
        "size": 2
    },
    "dblack2v": {
        "type": "v",
        "color": "rgba(0, 0, 0, .3)",
        "selected_color": "rgba(0, 0, 0, .3)",
        "size": 2
    },
    "lbrown2v": {
        "type": "v",
        "color": "rgba(177, 149, 85, .3)",
        "selected_color": "rgba(177, 149, 85, .3)",
        "size": 2
    },
    "lbrown2h": {
        "type": "h",
        "color": "rgba(177, 149, 85, .3)",
        "selected_color": "rgba(177, 149, 85, .3)",
        "size": 2
    },
    "dbrown2h": {
        "type": "h",
        "color": "rgba(120, 109, 84, .3)",
        "selected_color": "rgba(120, 109, 84, .3)",
        "size": 2
    },
    "dbrown2v": {
        "type": "v",
        "color": "rgba(120, 109, 84, .3)",
        "selected_color": "rgba(120, 109, 84, .3)",
        "size": 2
    }
};

class PieceFactory {
    static create(piece) {
        const box = Boxes[piece.box];
        switch (box.type) {
            case 'v':
                return new VerticalPiece(piece.row, piece.col, box);
            case 'h':
                return new HorizontalPiece(piece.row, piece.col, box);
        }
    }
}

class Level {
    constructor(level) {
        this._model = level;
        this._currentPiece = null;
        this._time = level.time;
        this._isLevelFinished = false;
        this._title = level.title || "";
        this._pieces = level.pieces.map(piece => PieceFactory.create(piece));
    }
    selectPiece(point) {
        const piece = this._getPiece(point);
        if (!piece)
            return;
        if (this._currentPiece)
            this._currentPiece.setSelected(false);
        this._currentPiece = piece;
        this._currentPiece.setSelected(true);
    }
    nextStage(point) {
        if (this._isLevelFinished)
            return true;
        this._movePieceTo(point);
        if (this._currentPiece &&
            this._currentPiece.isMain() &&
            this._currentPiece.getCol() === 4)
            this._isLevelFinished = true;
        return this._isLevelFinished;
    }
    getTime() {
        return this._time;
    }
    getTitle() {
        return this._title;
    }
    paint(context) {
        this._paintGrid(context);
        this._paintPieces(context);
    }
    _paintGrid(context) {
        const size = ~~context.canvas.width / 6;
        // Paint Vertical Lines
        for (let i = 1; i <= 5; i++) {
            paintLine(context, (i * size), 0, (i * size), context.canvas.height, "rgba(255, 255, 255, 0.1)", .5);
        }
        // Paint Horizontal Lines
        for (let j = 1; j <= 5; j++) {
            paintLine(context, 0, (j * size), context.canvas.width, (j * size), "rgba(255, 255, 255, 0.1)", .5);
        }
    }
    _paintPieces(context) {
        this._pieces.forEach(piece => piece.paint(context));
    }
    _getPiece(point) {
        for (let piece of this._pieces) {
            if (piece.isAt(point))
                return piece;
        }
    }
    _canPlaceOn(point) {
        let row;
        const piece = this._currentPiece;
        if (!!this._getPiece(point))
            return false;
        switch (piece.constructor.name) {
            case 'HorizontalPiece':
                if (point.y != piece.getRow())
                    return false;
                row = range(0, 6).map(i => (piece.isAt({ y: point.y, x: i })) ?
                    false : !!this._getPiece({ y: point.y, x: i }));
                return range(piece.getCol(), point.x).every(i => row[i] === false);
            case 'VerticalPiece':
                if (point.x != piece.getCol())
                    return false;
                row = range(0, 6).map(i => (this._currentPiece.isAt({ y: i, x: point.x })) ?
                    false : !!this._getPiece({ y: i, x: point.x }));
                return range(piece.getRow(), point.y).every(i => row[i] === false);
            default:
                return false;
        }
    }
    _movePieceTo(point) {
        if (!this._currentPiece ||
            !this._canPlaceOn(point))
            return;
        this._currentPiece.moveTo(point);
    }
    isDone() {
        return this._isLevelFinished;
    }
    reset() {
        this._currentPiece = null;
        this._time = this._model.time;
        this._isLevelFinished = false;
        this._title = this._model.title || "";
        this._pieces = this._model.pieces.map(piece => PieceFactory.create(piece));
    }
}

class EasyLevel extends Level {
    constructor(level) {
        super(level);
        this.difficulty = 'easy';
    }
    getDifficulty() {
        return this.difficulty;
    }
}

// import NormalLevel from './normal_level';
// import HardLevel from './hard_level';
class LevelFactory {
    static create(level) {
        switch (level.difficulty) {
            case 'easy':
                return new EasyLevel(level);
            default:
                return new EasyLevel(level);
        }
    }
}

class UIManager {
    constructor() {
        this._timeEnabled = true;
    }
    displayLife(domElement, lifes) {
        this._lifesElement = document.querySelector('.ui-lifes');
        for (let i = 0; i < lifes; i++) {
            const life = document.createElement('img');
            life.classList.add('life');
            life.src = './assets/life.svg';
            this._lifesElement.appendChild(life);
        }
    }
    resetLifes() {
        const lifes = Array.from(this._lifesElement.querySelectorAll('.no-life'));
        lifes.forEach(life => {
            const _life = life;
            _life.classList.remove('no-life');
            _life.classList.add('life');
            _life.src = './assets/life.svg';
        });
    }
    reduceLife() {
        const lifes = Array.from(this._lifesElement.querySelectorAll('.life'));
        const lastLife = lifes[0];
        if (lastLife) {
            const _lastLife = lastLife;
            _lastLife.classList.remove('life');
            _lastLife.classList.add('no-life');
            _lastLife.src = './assets/life2.svg';
        }
    }
    displayBackground(bg) {
        const bgImg = document.createElement('img');
        bgImg.src = `./assets/${bg}.jpg`;
        bgImg.classList.add('ui-bg');
        document.body.appendChild(bgImg);
    }
    resetTime(time) {
        this._time = time;
        this._timeEnabled = true;
        this._calculeTime();
    }
    disableTime() {
        this._timeEnabled = false;
        this._timeElement.classList.remove('alert');
        if (this._timerID)
            clearTimeout(this._timerID);
    }
    _calculeTime() {
        const timeMinutes = ~~(this._time / 60);
        const timeSeconds = this._time - (timeMinutes * 60);
        this._timeElement.classList[this._time <= 10 ? 'add' : 'remove']('alert');
        this._timeElement.textContent = `Time ${lpadTime(timeMinutes)}:${lpadTime(timeSeconds)}`;
        if (!this._time)
            return this._onTime();
        this._time--;
        if (this._time < 5)
            this._onNoTime();
        if (this._timeEnabled)
            this._timerID = setTimeout(() => this._calculeTime(), 1000);
    }
    displayTime(domElement, time, onNoTime, onTime) {
        const timeContainer = document.createElement('div');
        const timeTextElement = document.createElement('p');
        timeContainer.appendChild(timeTextElement);
        timeContainer.classList.add('ui-time-info');
        domElement.appendChild(timeContainer);
        this._timeElement = timeTextElement;
        this._time = time;
        this._onTime = onTime;
        this._onNoTime = onNoTime;
        this._calculeTime();
    }
    displayLevel(domElement, title, difficulty) {
        const levelContainer = document.createElement('div');
        this._levelTextElement = document.createElement('p');
        this._levelTextElement.textContent = `${title}`;
        levelContainer.appendChild(this._levelTextElement);
        levelContainer.classList.add('ui-level-info');
        domElement.appendChild(levelContainer);
    }
    setClose() {
        const closeBtn = document.querySelector('.ui-close-btn');
        if (!closeBtn)
            return;
        closeBtn.addEventListener('click', () => {
            const { ipcRenderer } = require('electron');
            ipcRenderer.send('close-main-window');
        });
    }
    updateLevel(title, difficulty) {
        this._levelTextElement.textContent = `${title}`;
    }
    setSoundControl(domElement, onToggleSound) {
        const soundControl = domElement.querySelector('.ui-sound-btn');
        if (!soundControl)
            return;
        soundControl.addEventListener('click', () => {
            soundControl.classList.toggle('enabled');
            onToggleSound();
        });
    }
    setMenu(domElement, onRetryLevel, onNext, onReset, onContinue) {
        this._retryBtn = domElement.querySelector('.ui-retry-btn');
        this._nextBtn = domElement.querySelector('.ui-next-btn');
        this._resetBtn = domElement.querySelector('.ui-reset-btn');
        this._continueBtn = domElement.querySelector('.ui-continue-btn');
        this._gameoverText = domElement.querySelector('.ui-gameover-text');
        this._retryBtn.addEventListener('click', onRetryLevel);
        this._nextBtn.addEventListener('click', onNext);
        this._resetBtn.addEventListener('click', onReset);
        this._continueBtn.addEventListener('click', onContinue);
    }
    displayMenu(domElement, scene = 'success') {
        this._retryBtn.classList.add('hide');
        this._nextBtn.classList.add('hide');
        this._resetBtn.classList.add('hide');
        this._gameoverText.classList.add('hide');
        this._continueBtn.classList.add('hide');
        switch (scene) {
            case 'gameover':
                this._resetBtn.classList.remove('hide');
                this._continueBtn.classList.remove('hide');
                this._gameoverText.classList.remove('hide');
                break;
            case 'fail':
                this._retryBtn.classList.remove('hide');
                break;
            case 'success':
                this._retryBtn.classList.remove('hide');
                this._nextBtn.classList.remove('hide');
                break;
            case 'end':
                this._gameoverText.textContent = "Now you see it and got free ...";
                this._gameoverText.classList.remove('hide');
                break;
        }
        domElement.classList.add('hover');
    }
    hideMenu(domElement) {
        domElement.classList.remove('hover');
    }
    setLoading(status) {
        document.querySelector('.loading')
            .classList[status === true ? 'remove' : 'add']('hide');
    }
}

function BufferLoader(context, urlList, callback) {
    this.context = context;
    this.urlList = urlList;
    this.onload = callback;
    this.bufferList = new Array();
    this.loadCount = 0;
}
BufferLoader.prototype.loadBuffer = function (url, index) {
    // Load buffer asynchronously
    var request = new XMLHttpRequest();
    request.open("GET", url, true);
    request.responseType = "arraybuffer";
    var loader = this;
    request.onload = function () {
        // Asynchronously decode the audio file data in request.response
        loader.context.decodeAudioData(request.response, function (buffer) {
            if (!buffer) {
                alert('error decoding file data: ' + url);
                return;
            }
            loader.bufferList[index] = buffer;
            if (++loader.loadCount == loader.urlList.length)
                loader.onload(loader.bufferList);
        }, function (error) {
            console.error('decodeAudioData error', error);
        });
    };
    request.onerror = function () {
        alert('BufferLoader: XHR error');
    };
    request.send();
};
BufferLoader.prototype.load = function () {
    for (var i = 0; i < this.urlList.length; ++i)
        this.loadBuffer(this.urlList[i], i);
};
class SoundManager {
    constructor() {
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        this._context = new AudioContext();
        this._enabled = true;
    }
    load(onLoaded) {
        const bufferLoader = new BufferLoader(this._context, [
            './assets/mousedown.mp3',
            './assets/mouseup.mp3',
            './assets/bg.mp3',
            './assets/success.mp3',
            './assets/doh.mp3',
            './assets/no_time.mp3',
        ], (bufferList) => {
            this._mousedownBuffer = bufferList[0];
            this._mouseupBuffer = bufferList[1];
            this._bgBuffer = bufferList[2];
            this._successBuffer = bufferList[3];
            this._dohBuffer = bufferList[4];
            this._noTimeBuffer = bufferList[5];
            onLoaded();
        });
        bufferLoader.load();
    }
    toggleSound() {
        this._enabled = !this._enabled;
        this._toggleBackground();
    }
    _toggleBackground() {
        if (this._enabled) {
            return this.playBackground(this._bgPausedAt);
        }
        this._bg.disconnect();
        this._bg.stop(0);
        this._bgPausedAt = this._context.currentTime - this._bgStartedAt;
        this._bgStartedAt = 0;
        this._bg = null;
    }
    playBackground(offset = 0) {
        this._bg = this._context.createBufferSource();
        this._bg.buffer = this._bgBuffer;
        this._bg.loop = true;
        this._bgPausedAt = offset;
        this._bg.connect(this._context.destination);
        this._bgStartedAt = this._context.currentTime - this._bgPausedAt;
        this._bg.start(0, this._bgPausedAt);
    }
    playMousedown() {
        if (!this._enabled)
            return;
        if (this._mousedown) {
            this._mousedown.disconnect();
            this._mousedown.stop(0);
            this._mousedown = null;
        }
        this._mousedown = this._context.createBufferSource();
        this._mousedown.buffer = this._mousedownBuffer;
        this._mousedown.connect(this._context.destination);
        this._mousedown.currentTime = 0;
        this._mousedown.start(0);
    }
    playMouseup() {
        if (!this._enabled)
            return;
        if (this._mouseup) {
            this._mouseup.disconnect();
            this._mouseup.stop(0);
            this._mouseup = null;
        }
        this._mouseup = this._context.createBufferSource();
        this._mouseup.buffer = this._mouseupBuffer;
        this._mouseup.connect(this._context.destination);
        this._mouseup.currentTime = 0;
        this._mouseup.start(0);
    }
    playSuccess() {
        if (!this._enabled)
            return;
        if (this._success) {
            this._success.disconnect();
            this._success.stop(0);
            this._success = null;
        }
        this._success = this._context.createBufferSource();
        this._success.buffer = this._successBuffer;
        this._success.connect(this._context.destination);
        this._success.currentTime = 0;
        this._success.start(0);
    }
    playFail() {
        if (!this._enabled)
            return;
        if (this._doh) {
            this._doh.disconnect();
            this._doh.stop(0);
            this._doh = null;
        }
        this._doh = this._context.createBufferSource();
        this._doh.buffer = this._dohBuffer;
        this._doh.connect(this._context.destination);
        this._doh.currentTime = 0;
        this._doh.start(0);
    }
    playNoTime() {
        if (!this._enabled)
            return;
        if (this._noTime) {
            this._noTime.disconnect();
            this._noTime.stop(0);
            this._noTime = null;
        }
        this._noTime = this._context.createBufferSource();
        this._noTime.buffer = this._noTimeBuffer;
        this._noTime.connect(this._context.destination);
        this._noTime.currentTime = 0;
        this._noTime.start(0);
    }
}

class Game {
    constructor(domElement, levels) {
        this._domElement = domElement;
        this._canvas = createCanvas();
        this._context = this._canvas.getContext('2d');
        this._levels = levels.map(level => LevelFactory.create(level));
        this._lifes = 3;
        this._soundManager = new SoundManager();
        this._uiManager = new UIManager();
        this._soundManager.load(() => this._init());
    }
    _onmouseup(event, canvas) {
        this._soundManager.playMouseup();
        const noNextStage = this._currentLevel
            .nextStage(getPointFromEvent(event, canvas));
        if (noNextStage) {
            // this._soundManager.playSuccess()
            this._uiManager.disableTime();
            this._uiManager.displayMenu(this._domElement);
        }
    }
    _onmousedown(event, canvas) {
        this._soundManager.playMousedown();
        this._currentLevel.selectPiece(getPointFromEvent(event, canvas));
    }
    _setSize() {
        this._canvas.width = this._domElement.getBoundingClientRect().width;
        this._canvas.height = this._domElement.getBoundingClientRect().height;
    }
    _setUIManager() {
        this._uiManager.displayBackground('bg2');
        this._uiManager.displayLife(document.body, this._lifes);
        this._uiManager.displayTime(document.body, this._currentLevel.getTime(), () => {
            this._soundManager.playNoTime();
        }, () => {
            this._lifes--;
            this._uiManager.reduceLife();
            this._uiManager.disableTime();
            this._soundManager.playFail();
            if (!this._lifes) {
                return this._uiManager.displayMenu(this._domElement, 'gameover');
            }
            this._uiManager.displayMenu(this._domElement, 'fail');
        });
        this._uiManager.displayLevel(document.body, this._currentLevel.getTitle());
        // this._currentLevel.getDifficulty())
        // this._uiManager.displaySettings()
        this._uiManager.setSoundControl(document.body, this._soundManager.toggleSound.bind(this._soundManager));
        this._uiManager.setMenu(this._domElement, (event) => {
            // on retry current level
            this._currentLevel.reset();
            this.run();
            this._uiManager.resetTime(this._currentLevel.getTime());
            this._uiManager.updateLevel(this._currentLevel.getTitle());
            this._uiManager.hideMenu(this._domElement);
        }, (event) => {
            // on next level
            this._nextLevel();
            if (!this._currentLevel) {
                return this._uiManager.displayMenu(this._domElement, 'end');
            }
            this.run();
            this._uiManager.resetTime(this._currentLevel.getTime());
            this._uiManager.updateLevel(this._currentLevel.getTitle())
                > this._uiManager.hideMenu(this._domElement);
        }, (event) => {
            // on game over (reset everything)
            this._lifes = 3;
            this._uiManager.resetLifes();
            this._reset();
            this._nextLevel();
            this.run();
            this._uiManager.resetTime(this._currentLevel.getTime());
            this._uiManager.updateLevel(this._currentLevel.getTitle());
            this._uiManager.hideMenu(this._domElement);
        }, (event) => {
            // on pay and continue everything
            this._lifes = 3;
            this._uiManager.resetLifes();
            // this._currentLevel.reset()
            this.run();
            this._uiManager.resetTime(this._currentLevel.getTime());
            this._uiManager.updateLevel(this._currentLevel.getTitle());
            this._uiManager.hideMenu(this._domElement);
        });
        this._uiManager.setClose();
        this._domElement.querySelector('.game').appendChild(this._canvas);
    }
    _playBg() {
        this._soundManager.playBackground();
    }
    _init() {
        this._uiManager.setLoading(false);
        this._setSize();
        this._nextLevel();
        this._setUIManager();
        this._setEventListeners();
        this._playBg();
        this.run();
    }
    _setEventListeners() {
        const onResize = (event) => {
            if (!this._currentLevel)
                return;
            this._setSize();
            this.run();
        };
        const onMouseUp = (event) => {
            this._onmouseup(event, this._canvas);
            this.run();
        };
        const onMouseDown = (event) => {
            this._onmousedown(event, this._canvas);
            this.run();
        };
        const onUnload = (event) => {
            window.removeEventListener('resize', onResize);
            this._canvas.removeEventListener('mouseup', onMouseUp);
            this._canvas.removeEventListener('mousedown', onMouseDown);
        };
        // Calls to run are meant to prevent calling requestAnimationFrame
        window.addEventListener('resize', onResize);
        this._canvas.addEventListener('mouseup', onMouseUp);
        this._canvas.addEventListener('mousedown', onMouseDown);
        window.onunload = onUnload;
    }
    _reset() {
        this._levels.forEach(level => level.reset());
    }
    _nextLevel() {
        this._currentLevel = this._levels.find(level => !level.isDone());
    }
    run() {
        this._canvas.style.display = 'none';
        this._context.clearRect(0, 0, this._context.canvas.width, this._context.canvas.height);
        this._currentLevel.paint(this._context);
        this._canvas.style.display = 'block';
        // requestAnimationFrame(()=>this.run())
    }
}

class GameFactory {
    static create(type) {
        let levels;
        const containerDomElement = document.querySelector('.app');
        if (!containerDomElement)
            throw new Error('No container Dom Element found');
        switch (type) {
            case GameFactory.GAME_EASY:
            case GameFactory.GAME_NORMAL:
            case GameFactory.GAME_ADVANCED:
            case GameFactory.GAME_EXPERT:
                levels = Object.values(gameLevels)
                    .filter(level => level.difficulty === type);
                return new Game(containerDomElement, levels);
            case GameFactory.GAME_ALL_LEVELS:
                levels = Object.values(gameLevels);
                return new Game(containerDomElement, levels);
            default:
                throw Error('No GAME_TYPE specified');
        }
    }
}
GameFactory.GAME_EASY = 'easy';
GameFactory.GAME_NORMAL = 'normal';
GameFactory.GAME_ADVANCED = 'advanced';
GameFactory.GAME_EXPERT = 'expert';
GameFactory.GAME_ALL_LEVELS = 'all';

// Run the game once browser has stopped loading resources
window.onload = () => GameFactory.create(GameFactory.GAME_ALL_LEVELS);
